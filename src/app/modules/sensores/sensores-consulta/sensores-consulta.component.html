<main style="padding: 2rem">
  <div class="main-content">
    <div style="display: flex; justify-content: space-between; margin-bottom: 2rem">
      <h1 style="font-family: fredoka, sans-serif; font-size: 2rem">Consultar sensores</h1>
      <button mat-raised-button color="primary" routerLink="pre-cadastro">
        <mat-icon>add</mat-icon>
        <span>Pré-cadastrar</span>
      </button>
    </div>
    <ng-container *ngIf="loading else loaded">
      <mat-spinner></mat-spinner>
    </ng-container>
    <ng-template #loaded>
      <mat-form-field appearance="standard">
        <mat-label>Filtrar sensores</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Parâmetro de busca" #input>
      </mat-form-field>
      <table
        mat-table
        [dataSource]="this.sensoresDataSource"
        matSort
        class="mat-elevation-z0 fullwidth"
        style="height: 80%;"
        aria-description="Tabela de consulta de sensores e atuadores"
        aria-describedby="Tabela de consulta de sensores e atuadores"
      >
        <ng-container matColumnDef="uuid_sensor">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por UUID">
            UUID do sensor/atuador
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.uuid_sensor_atuador }}
          </td>
        </ng-container>
        <ng-container matColumnDef="nome_sensor">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por nome">
            Nome
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.nome_sensor ?? 'Não informado' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="latitude">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por latitude">
            Latitude
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.latitude ?? 'Não informado' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="longitude">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por longitude">
            Longitude
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.longitude ?? 'Não informado' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="data_cadastro_sensor">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por data do cadastro">
            Data do cadastro
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.data_cadastro_sensor ?? 'Não informado' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="data_precadastro_sensor">
          <th mat-header-cell *matHeaderCellDef mat-sort-header
              sortActionDescription="Ordenar por data de pré-cadastro">
            Data do pré-cadastro
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.data_precadastro_sensor }}
          </td>
        </ng-container>
        <ng-container matColumnDef="observacoes">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por observações">
            Observações
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.observacoes ?? 'Não informado' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="usuario_cadastrante">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por usuário cadastrante">
            Usuário cadastrante
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.usuario_cadastrante ? sensorAtuador.usuario_cadastrante.nome_usuario : 'Não informado' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="area">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por área">
            Área
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.area ? sensorAtuador.area.nome_area : 'Não informado' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="cultura">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por cultura">
            Cultura
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.cultura ? sensorAtuador.cultura.nome_cultura : 'Não informado' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="tipo_sensor">
          <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Ordenar por tipo de sensor">
            Tipo de sensor
          </th>
          <td mat-cell *matCellDef="let sensorAtuador">
            {{ sensorAtuador.tipo_sensor.nome_tipo_sensor }}
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
      <mat-paginator
        class="mat-elevation-z4"
        showFirstLastButtons
        [pageSizeOptions]="pageSizeOptions"
        aria-label="Paginação da tabela de consulta de sensores e atuadores"
      ></mat-paginator>
    </ng-template>
  </div>
</main>
